(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{605:function(s,e,t){"use strict";t.r(e);var a=t(1),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker-hub"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-hub"}},[s._v("#")]),s._v(" Docker Hub")]),s._v(" "),t("AdSenseTitle"),s._v(" "),t("p",[s._v("目前 Docker 官方维护了一个公共仓库 "),t("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Hub"),t("OutboundLink")],1),s._v("，其中已经包括了数量超过 "),t("a",{attrs:{href:"https://hub.docker.com/search/?type=image",target:"_blank",rel:"noopener noreferrer"}},[s._v("2,650,000"),t("OutboundLink")],1),s._v(" 的镜像。大部分需求都可以通过在 Docker Hub 中直接下载镜像来实现。")]),s._v(" "),t("h2",{attrs:{id:"注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册"}},[s._v("#")]),s._v(" 注册")]),s._v(" "),t("p",[s._v("你可以在 https://hub.docker.com 免费注册一个 Docker 账号。")]),s._v(" "),t("h2",{attrs:{id:"登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),t("p",[s._v("可以通过执行 "),t("code",[s._v("docker login")]),s._v(" 命令交互式的输入用户名及密码来完成在命令行界面登录 Docker Hub。")]),s._v(" "),t("p",[s._v("你可以通过 "),t("code",[s._v("docker logout")]),s._v(" 退出登录。")]),s._v(" "),t("h2",{attrs:{id:"拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[s._v("#")]),s._v(" 拉取镜像")]),s._v(" "),t("p",[s._v("你可以通过 "),t("code",[s._v("docker search")]),s._v(" 命令来查找官方仓库中的镜像，并利用 "),t("code",[s._v("docker pull")]),s._v(" 命令来将它下载到本地。")]),s._v(" "),t("p",[s._v("例如以 "),t("code",[s._v("centos")]),s._v(" 为关键词进行搜索：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search centos\nNAME                               DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                             The official build of CentOS.                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6449")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nansible/centos7-ansible            Ansible on Centos7                              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("132")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nconsol/centos-xfce-vnc             Centos container with "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"headless"')]),s._v(" VNC session…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("126")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njdeathe/centos-ssh                 OpenSSH / Supervisor / EPEL/IUS/SCL Repos - …   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("117")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncentos/systemd                     systemd enabled base container.                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("可以看到返回了很多包含关键字的镜像，其中包括镜像名字、描述、收藏数（表示该镜像的受关注程度）、是否官方创建（"),t("code",[s._v("OFFICIAL")]),s._v("）、是否自动构建 （"),t("code",[s._v("AUTOMATED")]),s._v("）。")]),s._v(" "),t("p",[s._v("根据是否是官方提供，可将镜像分为两类。")]),s._v(" "),t("p",[s._v("一种是类似 "),t("code",[s._v("centos")]),s._v(" 这样的镜像，被称为基础镜像或根镜像。这些基础镜像由 Docker 公司创建、验证、支持、提供。这样的镜像往往使用单个单词作为名字。")]),s._v(" "),t("p",[s._v("还有一种类型，比如 "),t("code",[s._v("ansible/centos7-ansible")]),s._v(" 镜像，它是由 Docker Hub 的注册用户创建并维护的，往往带有用户名称前缀。可以通过前缀 "),t("code",[s._v("username/")]),s._v(" 来指定使用某个用户提供的镜像，比如 ansible 用户。")]),s._v(" "),t("p",[s._v("另外，在查找的时候通过 "),t("code",[s._v("--filter=stars=N")]),s._v(" 参数可以指定仅显示收藏数量为 "),t("code",[s._v("N")]),s._v(" 以上的镜像。")]),s._v(" "),t("p",[s._v("下载官方 "),t("code",[s._v("centos")]),s._v(" 镜像到本地。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull centos\nUsing default tag: latest\nlatest: Pulling from library/centos\n7a0437f04f83: Pull complete\nDigest: sha256:5528e8b1b1719d34604c87e11dcd1c0a20bedf46e83b5632cdeac91b8c04efc1\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" centos:latest\ndocker.io/library/centos:latest\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"推送镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推送镜像"}},[s._v("#")]),s._v(" 推送镜像")]),s._v(" "),t("p",[s._v("用户也可以在登录后通过 "),t("code",[s._v("docker push")]),s._v(" 命令来将自己的镜像推送到 Docker Hub。")]),s._v(" "),t("p",[s._v("以下命令中的 "),t("code",[s._v("username")]),s._v(" 请替换为你的 Docker 账号用户名。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag ubuntu:18.04 username/ubuntu:18.04\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\nREPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE\nubuntu                                                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.04")]),s._v("                  275d79972a86        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v(".6MB\nusername/ubuntu                                          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.04")]),s._v("                  275d79972a86        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v(".6MB\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push username/ubuntu:18.04\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search username\n\nNAME                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nusername/ubuntu\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h2",{attrs:{id:"自动构建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动构建"}},[s._v("#")]),s._v(" 自动构建")]),s._v(" "),t("blockquote",[t("p",[s._v("2021 年 7 月 26 日之后，该项功能仅限"),t("a",{attrs:{href:"https://www.docker.com/blog/changes-to-docker-hub-autobuilds/",target:"_blank",rel:"noopener noreferrer"}},[s._v("付费用户"),t("OutboundLink")],1),s._v("使用。")])]),s._v(" "),t("p",[s._v("自动构建（"),t("code",[s._v("Automated Builds")]),s._v("）可以自动触发构建镜像，方便升级镜像。")]),s._v(" "),t("p",[s._v("有时候，用户构建了镜像，安装了某个软件，当软件发布新版本则需要手动更新镜像。")]),s._v(" "),t("p",[s._v("而自动构建允许用户通过 Docker Hub 指定跟踪一个目标网站（支持 "),t("a",{attrs:{href:"https://github.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),t("OutboundLink")],1),s._v(" 或 "),t("a",{attrs:{href:"https://bitbucket.org",target:"_blank",rel:"noopener noreferrer"}},[s._v("BitBucket"),t("OutboundLink")],1),s._v("）上的项目，一旦项目发生新的提交 （"),t("code",[s._v("commit")]),s._v("）或者创建了新的标签（"),t("code",[s._v("tag")]),s._v("），Docker Hub 会自动构建镜像并推送到 Docker Hub 中。")]),s._v(" "),t("p",[s._v("要配置自动构建，包括如下的步骤：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("登录 Docker Hub；")])]),s._v(" "),t("li",[t("p",[s._v("在 Docker Hub 点击右上角头像，在账号设置（"),t("code",[s._v("Account Settings")]),s._v("）中关联（"),t("code",[s._v("Linked Accounts")]),s._v("）目标网站；")])]),s._v(" "),t("li",[t("p",[s._v("在 Docker Hub 中新建或选择已有的仓库，在 "),t("code",[s._v("Builds")]),s._v(" 选项卡中选择 "),t("code",[s._v("Configure Automated Builds")]),s._v("；")])]),s._v(" "),t("li",[t("p",[s._v("选取一个目标网站中的项目（需要含 "),t("code",[s._v("Dockerfile")]),s._v("）和分支；")])]),s._v(" "),t("li",[t("p",[s._v("指定 "),t("code",[s._v("Dockerfile")]),s._v(" 的位置，并保存。")])])]),s._v(" "),t("p",[s._v("之后，可以在 Docker Hub 的仓库页面的 "),t("code",[s._v("Timeline")]),s._v(" 选项卡中查看每次构建的状态。")])],1)}),[],!1,null,null,null);e.default=n.exports}}]);