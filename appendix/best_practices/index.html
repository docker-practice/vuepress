<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dockerfile æœ€ä½³å®è·µ | Docker ä»å…¥é—¨åˆ°å®è·µ</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script>
  var _hmt = _hmt || [];
  (function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?81a3490c9cd141dbcf6d00bc18b6edae";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script>
    <script>
  (function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
  </script>
    <link rel="alternate" type="application/atom+xml" href="https://vuepress.mirror.docker-practice.com/atom.xml" title="Docker ä»å…¥é—¨åˆ°å®è·µ Atom Feed">
    <link rel="alternate" type="application/json" href="https://vuepress.mirror.docker-practice.com/feed.json" title="Docker ä»å…¥é—¨åˆ°å®è·µ JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://vuepress.mirror.docker-practice.com/rss.xml" title="Docker ä»å…¥é—¨åˆ°å®è·µ RSS Feed">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="">
    <meta property="og:url" content="/appendix/best_practices.html">
    <meta property="og:site_name" content="Docker ä»å…¥é—¨åˆ°å®è·µ">
    <meta property="og:title" content="Dockerfile æœ€ä½³å®è·µ">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Docker ä»å…¥é—¨åˆ°å®è·µ">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.bbeb4fca.css" as="style"><link rel="preload" href="/assets/js/app.92c4a4d7.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.16be0bbb.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.f10967b0.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.49b65001.js" as="script"><link rel="preload" href="/assets/js/page-Dockerfileæœ€ä½³å®è·µ.b7440de4.js" as="script"><link rel="preload" href="/assets/js/184.19d3cc16.js" as="script"><link rel="prefetch" href="/assets/js/185.95089074.js"><link rel="prefetch" href="/assets/js/186.7ff84c27.js"><link rel="prefetch" href="/assets/js/187.acacb58c.js"><link rel="prefetch" href="/assets/js/188.77466258.js"><link rel="prefetch" href="/assets/js/189.32341b6e.js"><link rel="prefetch" href="/assets/js/layout-Blog.b552bca7.js"><link rel="prefetch" href="/assets/js/layout-Layout.8241e617.js"><link rel="prefetch" href="/assets/js/layout-NotFound.d696beb9.js"><link rel="prefetch" href="/assets/js/layout-Slide.af31b4ae.js"><link rel="prefetch" href="/assets/js/page--1680a9ba.8546b978.js"><link rel="prefetch" href="/assets/js/page--220c6e3a.78237e3f.js"><link rel="prefetch" href="/assets/js/page--4750df62.a4d60e3a.js"><link rel="prefetch" href="/assets/js/page--75af3dfa.ce196190.js"><link rel="prefetch" href="/assets/js/page--7d3316f5.bfe6450b.js"><link rel="prefetch" href="/assets/js/page-ADDæ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶.d41e749d.js"><link rel="prefetch" href="/assets/js/page-ARGæ„å»ºå‚æ•°.7272750b.js"><link rel="prefetch" href="/assets/js/page-Alpine.6dbdfb24.js"><link rel="prefetch" href="/assets/js/page-Busybox.1add0aa1.js"><link rel="prefetch" href="/assets/js/page-CICD.3cd767e3.js"><link rel="prefetch" href="/assets/js/page-CMDå®¹å™¨å¯åŠ¨å‘½ä»¤.9594a848.js"><link rel="prefetch" href="/assets/js/page-COPYå¤åˆ¶æ–‡ä»¶.7d134b0d.js"><link rel="prefetch" href="/assets/js/page-CentOS.dd9d2993.js"><link rel="prefetch" href="/assets/js/page-CentOSFedora.edbda1e0.js"><link rel="prefetch" href="/assets/js/page-CentOSå®‰è£…Docker.ee6d33c8.js"><link rel="prefetch" href="/assets/js/page-Composeå‘½ä»¤è¯´æ˜.bd5230f5.js"><link rel="prefetch" href="/assets/js/page-Composeæ¨¡æ¿æ–‡ä»¶.b5f4a986.js"><link rel="prefetch" href="/assets/js/page-Composeç®€ä»‹.5353c0f7.js"><link rel="prefetch" href="/assets/js/page-DebianUbuntu.6b07bf92.js"><link rel="prefetch" href="/assets/js/page-Debianå®‰è£…Docker.519b2c41.js"><link rel="prefetch" href="/assets/js/page-DockerBuildx.b9af27ea.js"><link rel="prefetch" href="/assets/js/page-DockerComposeé¡¹ç›®.c918dc74.js"><link rel="prefetch" href="/assets/js/page-DockerDesktopå¯ç”¨Kubernetes.8bb6be8a.js"><link rel="prefetch" href="/assets/js/page-DockerHub.98fc64a5.js"><link rel="prefetch" href="/assets/js/page-DockerMachineé¡¹ç›®.71a2376a.js"><link rel="prefetch" href="/assets/js/page-DockerRegistry.eeffb03d.js"><link rel="prefetch" href="/assets/js/page-DockerfileæŒ‡ä»¤è¯¦è§£.54e56c48.js"><link rel="prefetch" href="/assets/js/page-Dockerâ€”ä»å…¥é—¨åˆ°å®è·µ.9556ae18.js"><link rel="prefetch" href="/assets/js/page-Dockerä¸‰å‰‘å®¢ä¹‹DockerSwarm.4c32db45.js"><link rel="prefetch" href="/assets/js/page-Dockerä¸­çš„ç½‘ç»œåŠŸèƒ½ä»‹ç».b6ad835e.js"><link rel="prefetch" href="/assets/js/page-Dockerå‘½ä»¤æŸ¥è¯¢.5486af2b.js"><link rel="prefetch" href="/assets/js/page-Dockerå®¹å™¨.8c454abc.js"><link rel="prefetch" href="/assets/js/page-Dockeræ•°æ®ç®¡ç†.60a3f007.js"><link rel="prefetch" href="/assets/js/page-DockeræœåŠ¡ç«¯çš„é˜²æŠ¤.41f1601b.js"><link rel="prefetch" href="/assets/js/page-Dockerç½‘ç»œå®ç°.109741b0.js"><link rel="prefetch" href="/assets/js/page-Dockeré•œåƒ.bd8a7b7c.js"><link rel="prefetch" href="/assets/js/page-Drone.a85fc533.js"><link rel="prefetch" href="/assets/js/page-DroneDemo.1d5b3ffb.js"><link rel="prefetch" href="/assets/js/page-ENTRYPOINTå…¥å£ç‚¹.98c8cd25.js"><link rel="prefetch" href="/assets/js/page-ENVè®¾ç½®ç¯å¢ƒå˜é‡.259b216c.js"><link rel="prefetch" href="/assets/js/page-EXPOSEå£°æ˜ç«¯å£.2228d107.js"><link rel="prefetch" href="/assets/js/page-FedoraCoreOS.15289be8.js"><link rel="prefetch" href="/assets/js/page-FedoraCoreOSä»‹ç».fdf31739.js"><link rel="prefetch" href="/assets/js/page-Fedoraå®‰è£…Docker.45b6ee23.js"><link rel="prefetch" href="/assets/js/page-GitHubActions.e58719b0.js"><link rel="prefetch" href="/assets/js/page-HEALTHCHECKå¥åº·æ£€æŸ¥.8c1994be.js"><link rel="prefetch" href="/assets/js/page-Kubernetes.658d6602.js"><link rel="prefetch" href="/assets/js/page-KubernetesDashboard.2b88d5ad.js"><link rel="prefetch" href="/assets/js/page-LABELæŒ‡ä»¤.7e522c1a.js"><link rel="prefetch" href="/assets/js/page-MongoDB.77e98382.js"><link rel="prefetch" href="/assets/js/page-MySQL.51ed3406.js"><link rel="prefetch" href="/assets/js/page-Nexus3xçš„ç§æœ‰ä»“åº“.12b15e74.js"><link rel="prefetch" href="/assets/js/page-Nginx.4b388c81.js"><link rel="prefetch" href="/assets/js/page-Nodejs.264ee8c7.js"><link rel="prefetch" href="/assets/js/page-ONBUILDä¸ºä»–äººåšå«è¡£è£³.e6ce59bd.js"><link rel="prefetch" href="/assets/js/page-PHP.11664176.js"><link rel="prefetch" href="/assets/js/page-Redis.d2e25ffe.js"><link rel="prefetch" href="/assets/js/page-SHELLæŒ‡ä»¤.f0e8a13d.js"><link rel="prefetch" href="/assets/js/page-SWarmmodeä¸æ»šåŠ¨å‡çº§.e4332025.js"><link rel="prefetch" href="/assets/js/page-Swarmmode.2c97e0b1.js"><link rel="prefetch" href="/assets/js/page-USERæŒ‡å®šå½“å‰ç”¨æˆ·.8b474506.js"><link rel="prefetch" href="/assets/js/page-Ubuntu.8b8830df.js"><link rel="prefetch" href="/assets/js/page-Ubuntuå®‰è£…Docker.7043066f.js"><link rel="prefetch" href="/assets/js/page-VOLUMEå®šä¹‰åŒ¿åå·.6d497f86.js"><link rel="prefetch" href="/assets/js/page-VSCodeä¸­ä½¿ç”¨Docker.a56bc5d7.js"><link rel="prefetch" href="/assets/js/page-WORKDIRæŒ‡å®šå·¥ä½œç›®å½•.3cdbd550.js"><link rel="prefetch" href="/assets/js/page-Windows10å®‰è£…Docker.405773b1.js"><link rel="prefetch" href="/assets/js/page-WordPress.86488fda.js"><link rel="prefetch" href="/assets/js/page-etcd.f830a447.js"><link rel="prefetch" href="/assets/js/page-etcdé›†ç¾¤.c32e5242.js"><link rel="prefetch" href="/assets/js/page-kubectlä½¿ç”¨.33e7f657.js"><link rel="prefetch" href="/assets/js/page-macOSå®‰è£…Docker.304f78f1.js"><link rel="prefetch" href="/assets/js/page-minio.160d0a35.js"><link rel="prefetch" href="/assets/js/page-podman.9a50688c.js"><link rel="prefetch" href="/assets/js/page-ä¸€æ­¥æ­¥éƒ¨ç½²kubernetesé›†ç¾¤.478de9f6.js"><link rel="prefetch" href="/assets/js/page-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Dockerï¼Ÿ.41518d70.js"><link rel="prefetch" href="/assets/js/page-äºšé©¬é€Šäº‘.10ee1edf.js"><link rel="prefetch" href="/assets/js/page-ä»€ä¹ˆæ˜¯Docker.9f87a7e3.js"><link rel="prefetch" href="/assets/js/page-ä»€ä¹ˆæ˜¯etcd.4b254de5.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨.ff5bbc42.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨BuildKitæ„å»ºé•œåƒ.2b503b32.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨Buildxæ„å»ºé•œåƒ.39b9a570.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨Django.87b6a93a.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨Dockerfileå®šåˆ¶é•œåƒ.940d248f.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨Dockeré•œåƒ.a8744294.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨Rails.c8c61626.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨WordPress.09bbc2ce.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨buildxæ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„Dockeré•œåƒ.0f7e0e8f.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨composeæ­å»ºLNMPç¯å¢ƒ.9ec8eb24.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨etcdctl.13092e66.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨etcdctlv2.f3504855.js"><link rel="prefetch" href="/assets/js/page-ä½¿ç”¨kubeadméƒ¨ç½²kubernetes.bea6208c.js"><link rel="prefetch" href="/assets/js/page-ä¿®è®¢è®°å½•.e9670bd0.js"><link rel="prefetch" href="/assets/js/page-å…¶å®ƒåˆ¶ä½œé•œåƒçš„æ–¹å¼.1d9f185e.js"><link rel="prefetch" href="/assets/js/page-å…¶å®ƒå®‰å…¨ç‰¹æ€§.5cfe1125.js"><link rel="prefetch" href="/assets/js/page-å†…æ ¸å‘½åç©ºé—´.5e27b1ab.js"><link rel="prefetch" href="/assets/js/page-å†…æ ¸èƒ½åŠ›æœºåˆ¶.6ebc4a04.js"><link rel="prefetch" href="/assets/js/page-åˆ—å‡ºé•œåƒ.89efa95a.js"><link rel="prefetch" href="/assets/js/page-åˆ›å»ºSwarmé›†ç¾¤.c7622d88.js"><link rel="prefetch" href="/assets/js/page-åˆ é™¤å®¹å™¨.d7fe3659.js"><link rel="prefetch" href="/assets/js/page-åˆ é™¤æœ¬åœ°é•œåƒ.6711d47a.js"><link rel="prefetch" href="/assets/js/page-åˆ©ç”¨commitç†è§£é•œåƒæ„æˆ.ebc9185a.js"><link rel="prefetch" href="/assets/js/page-å‚è€ƒæ–‡æ¡£.6a3d6f99.js"><link rel="prefetch" href="/assets/js/page-åå°è¿è¡Œ.8c417013.js"><link rel="prefetch" href="/assets/js/page-å¯åŠ¨å®¹å™¨.8453eb9a.js"><link rel="prefetch" href="/assets/js/page-å‘½åç©ºé—´.dcb47411.js"><link rel="prefetch" href="/assets/js/page-åœ¨IDEä¸­ä½¿ç”¨Docker.a079a1dc.js"><link rel="prefetch" href="/assets/js/page-åœ¨Swarmé›†ç¾¤ä¸­ä½¿ç”¨composeæ–‡ä»¶.d2049157.js"><link rel="prefetch" href="/assets/js/page-åœ¨Swarmé›†ç¾¤ä¸­ç®¡ç†æ•æ„Ÿæ•°æ®.a4019705.js"><link rel="prefetch" href="/assets/js/page-åœ¨Swarmé›†ç¾¤ä¸­ç®¡ç†é…ç½®æ•°æ®.5c81ab7b.js"><link rel="prefetch" href="/assets/js/page-åŸºæœ¬æ¶æ„.a1f7b947.js"><link rel="prefetch" href="/assets/js/page-åŸºæœ¬æ¦‚å¿µ.0cfc4c76.js"><link rel="prefetch" href="/assets/js/page-å¤–éƒ¨è®¿é—®å®¹å™¨.6f7d9627.js"><link rel="prefetch" href="/assets/js/page-å¤šé˜¶æ®µæ„å»º.fd77c740.js"><link rel="prefetch" href="/assets/js/page-å¦‚ä½•è°ƒè¯•Docker.f4a35669.js"><link rel="prefetch" href="/assets/js/page-å¦‚ä½•è´¡çŒ®.5ac8e288.js"><link rel="prefetch" href="/assets/js/page-å®‰å…¨.57ceacc9.js"><link rel="prefetch" href="/assets/js/page-å®‰è£….22df0fe5.js"><link rel="prefetch" href="/assets/js/page-å®‰è£…Docker.151826e0.js"><link rel="prefetch" href="/assets/js/page-å®‰è£…FedoraCoreOS.a834d5e3.js"><link rel="prefetch" href="/assets/js/page-å®‰è£…ä¸å¸è½½.75ab2557.js"><link rel="prefetch" href="/assets/js/page-å®æˆ˜å¤šé˜¶æ®µæ„å»ºLaravelé•œåƒ.dba17f56.js"><link rel="prefetch" href="/assets/js/page-å®¢æˆ·ç«¯å‘½ä»¤(docker).f56caf12.js"><link rel="prefetch" href="/assets/js/page-å®¹å™¨ä¸äº‘è®¡ç®—.aa70ff7d.js"><link rel="prefetch" href="/assets/js/page-å®¹å™¨äº’è”.6e992585.js"><link rel="prefetch" href="/assets/js/page-å®¹å™¨æ ¼å¼.0142ff5a.js"><link rel="prefetch" href="/assets/js/page-å®¹å™¨è®¿é—®æ§åˆ¶.ded07ce0.js"><link rel="prefetch" href="/assets/js/page-å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨.ed8170a0.js"><link rel="prefetch" href="/assets/js/page-å·¥å…·å’Œç¤ºä¾‹.3a4cdead.js"><link rel="prefetch" href="/assets/js/page-å¸¸è§é—®é¢˜æ€»ç»“.363a0b90.js"><link rel="prefetch" href="/assets/js/page-åº•å±‚å®ç°.f3ecca4c.js"><link rel="prefetch" href="/assets/js/page-å¼€å¯å®éªŒç‰¹æ€§.3531b144.js"><link rel="prefetch" href="/assets/js/page-å½’æ¡£é¡¹ç›®.cda7b7f6.js"><link rel="prefetch" href="/assets/js/page-å¿«é€Ÿé…ç½®æŒ‡å—.a8dbd819.js"><link rel="prefetch" href="/assets/js/page-æ€»ç»“.5bcf6a6f.js"><link rel="prefetch" href="/assets/js/page-æŒ‚è½½ä¸»æœºç›®å½•.1821822a.js"><link rel="prefetch" href="/assets/js/page-æ§åˆ¶ç»„.8a68c3cf.js"><link rel="prefetch" href="/assets/js/page-æ“ä½œDockerå®¹å™¨.721a4e56.js"><link rel="prefetch" href="/assets/js/page-æ“ä½œç³»ç»Ÿ.60ddf0a6.js"><link rel="prefetch" href="/assets/js/page-æ•°æ®å·.444de2f4.js"><link rel="prefetch" href="/assets/js/page-æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºçš„å®ç°.ee61c893.js"><link rel="prefetch" href="/assets/js/page-æœåŠ¡ç«¯å‘½ä»¤(dockerd).1196092d.js"><link rel="prefetch" href="/assets/js/page-æœ¬ç« å°ç»“.a69be554.js"><link rel="prefetch" href="/assets/js/page-æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„Dockeré•œåƒ--dockermanifestå‘½ä»¤è¯¦è§£.37d7fe77.js"><link rel="prefetch" href="/assets/js/page-æ ‘è“æ´¾å¡ç‰‡ç”µè„‘å®‰è£…Docker.4319b596.js"><link rel="prefetch" href="/assets/js/page-çƒ­é—¨é•œåƒä»‹ç».766015ed.js"><link rel="prefetch" href="/assets/js/page-ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç‚¹åˆ°ç‚¹è¿æ¥.a5491459.js"><link rel="prefetch" href="/assets/js/page-ç¦»çº¿éƒ¨ç½²Docker.d2ce1834.js"><link rel="prefetch" href="/assets/js/page-ç§æœ‰ä»“åº“.3d5c0167.js"><link rel="prefetch" href="/assets/js/page-ç§æœ‰ä»“åº“é«˜çº§é…ç½®.d75a50b2.js"><link rel="prefetch" href="/assets/js/page-ç®€ä»‹.9669aa81.js"><link rel="prefetch" href="/assets/js/page-ç»ˆæ­¢å®¹å™¨.a07b03f5.js"><link rel="prefetch" href="/assets/js/page-ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶.0d3dddea.js"><link rel="prefetch" href="/assets/js/page-è”åˆæ–‡ä»¶ç³»ç»Ÿ.ef3af508.js"><link rel="prefetch" href="/assets/js/page-è…¾è®¯äº‘.d250eee2.js"><link rel="prefetch" href="/assets/js/page-è‡ªå®šä¹‰ç½‘æ¡¥.ce8043e7.js"><link rel="prefetch" href="/assets/js/page-è·å–é•œåƒ.c0cfcac8.js"><link rel="prefetch" href="/assets/js/page-è®¿é—®ä»“åº“.efffe91d.js"><link rel="prefetch" href="/assets/js/page-èµ„æºé“¾æ¥.c1752292.js"><link rel="prefetch" href="/assets/js/page-è¿›å…¥å®¹å™¨.92ebea9f.js"><link rel="prefetch" href="/assets/js/page-éƒ¨ç½²Drone.f9cd59af.js"><link rel="prefetch" href="/assets/js/page-éƒ¨ç½²Kubernetes.43713580.js"><link rel="prefetch" href="/assets/js/page-éƒ¨ç½²æœåŠ¡.c3368383.js"><link rel="prefetch" href="/assets/js/page-é…ç½®DNS.139acfbd.js"><link rel="prefetch" href="/assets/js/page-é…ç½®docker0ç½‘æ¡¥.98626548.js"><link rel="prefetch" href="/assets/js/page-é•œåƒåŠ é€Ÿå™¨.56ec38d4.js"><link rel="prefetch" href="/assets/js/page-é•œåƒçš„å®ç°åŸç†.35d5a607.js"><link rel="prefetch" href="/assets/js/page-é˜¿é‡Œäº‘.300ef43e.js"><link rel="prefetch" href="/assets/js/page-é™„å½•.083a2dc2.js"><link rel="prefetch" href="/assets/js/page-é¡¹ç›®ç®€ä»‹.c52640ac.js"><link rel="prefetch" href="/assets/js/page-é«˜çº§ç½‘ç»œé…ç½®.5f5a30ba.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.dae59b88.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.90639465.js"><link rel="prefetch" href="/assets/js/vendors~reveal.f99fffa2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bbeb4fca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><!----> <!----> <span class="site-name">Docker ä»å…¥é—¨åˆ°å®è·µ</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">ä¸»é¢˜è‰²:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">ä¸»é¢˜æ¨¡å¼:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0042.667-42.667V128a42.667 42.667 0 00-85.334 0v85.333A42.667 42.667 0 00512 256zm384 213.333h-85.333a42.667 42.667 0 000 85.334H896a42.667 42.667 0 000-85.334zM256 512a42.667 42.667 0 00-42.667-42.667H128a42.667 42.667 0 000 85.334h85.333A42.667 42.667 0 00256 512zm9.387-298.667a42.667 42.667 0 00-59.307 62.72l61.44 59.307a42.667 42.667 0 0031.147 11.947 42.667 42.667 0 0030.72-13.227 42.667 42.667 0 000-60.16zm459.946 133.974a42.667 42.667 0 0029.44-11.947l61.44-59.307a42.667 42.667 0 00-57.6-62.72l-61.44 60.587a42.667 42.667 0 000 60.16 42.667 42.667 0 0028.16 13.227zM512 768a42.667 42.667 0 00-42.667 42.667V896a42.667 42.667 0 0085.334 0v-85.333A42.667 42.667 0 00512 768zm244.48-79.36a42.667 42.667 0 00-59.307 61.44l61.44 60.587a42.667 42.667 0 0029.44 11.946 42.667 42.667 0 0030.72-12.8 42.667 42.667 0 000-60.586zm-488.96 0l-61.44 59.307a42.667 42.667 0 000 60.586 42.667 42.667 0 0030.72 12.8 42.667 42.667 0 0028.587-10.666l61.44-59.307a42.667 42.667 0 00-59.307-61.44zM512 341.333A170.667 170.667 0 10682.667 512 170.667 170.667 0 00512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 00-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 00-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://yewm28.coding-pages.com/wechat.jpg" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  å¾®ä¿¡äº¤æµç¾¤
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://yewm28.coding-pages.com/49682252-3ac4c500-faec-11e8-86ab-eafe0139be6b.jpg" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  å°ç¨‹åº
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/install/" class="nav-link"><!---->
  å®‰è£… Docker
</a></div><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  Docker å…¥é—¨
</a></div><div class="nav-item"><a href="/cases/os/" class="nav-link"><!---->
  Docker å®æˆ˜
</a></div><div class="nav-item"><a href="/cases/ci/" class="nav-link"><!---->
  CI/CD
</a></div><div class="nav-item"><a href="/compose/" class="nav-link"><!---->
  Compose
</a></div><div class="nav-item"><a href="/kubernetes/" class="nav-link"><!---->
  Kubernetes
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link"><!---->
  äº‘è®¡ç®—
</a></div><div class="nav-item"><a href="https://github.com/yeasy/docker_practice" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://cloud.tencent.com/act/cps/redirect?redirect=10488&amp;cps_key=3a5255852d5db99dcd5da4c72f05df61&amp;from=activity" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  è…¾è®¯äº‘2021æ–°æ˜¥é‡‡è´­èŠ‚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/yeasy/docker_practice" target="_blank" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <nav class="nav-links"><div class="nav-item"><a href="https://yewm28.coding-pages.com/wechat.jpg" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  å¾®ä¿¡äº¤æµç¾¤
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://yewm28.coding-pages.com/49682252-3ac4c500-faec-11e8-86ab-eafe0139be6b.jpg" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  å°ç¨‹åº
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/install/" class="nav-link"><!---->
  å®‰è£… Docker
</a></div><div class="nav-item"><a href="/" class="nav-link router-link-active"><!---->
  Docker å…¥é—¨
</a></div><div class="nav-item"><a href="/cases/os/" class="nav-link"><!---->
  Docker å®æˆ˜
</a></div><div class="nav-item"><a href="/cases/ci/" class="nav-link"><!---->
  CI/CD
</a></div><div class="nav-item"><a href="/compose/" class="nav-link"><!---->
  Compose
</a></div><div class="nav-item"><a href="/kubernetes/" class="nav-link"><!---->
  Kubernetes
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link"><!---->
  äº‘è®¡ç®—
</a></div><div class="nav-item"><a href="https://github.com/yeasy/docker_practice" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://cloud.tencent.com/act/cps/redirect?redirect=10488&amp;cps_key=3a5255852d5db99dcd5da4c72f05df61&amp;from=activity" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  è…¾è®¯äº‘2021æ–°æ˜¥é‡‡è´­èŠ‚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/yeasy/docker_practice" target="_blank" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Docker â€” ä»å…¥é—¨åˆ°å®è·µ</a></li><li><a href="/CHANGELOG/" class="sidebar-link">ä¿®è®¢è®°å½•</a></li><li><a href="/CONTRIBUTING/" class="sidebar-link">å¦‚ä½•è´¡çŒ®</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Docker ç®€ä»‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction/" class="sidebar-link">ç®€ä»‹</a></li><li><a href="/introduction/what/" class="sidebar-link">ä»€ä¹ˆæ˜¯ Docker</a></li><li><a href="/introduction/why/" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Dockerï¼Ÿ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>åŸºæœ¬æ¦‚å¿µ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic_concept/" class="sidebar-link">åŸºæœ¬æ¦‚å¿µ</a></li><li><a href="/basic_concept/image/" class="sidebar-link">Docker é•œåƒ</a></li><li><a href="/basic_concept/container/" class="sidebar-link">Docker å®¹å™¨</a></li><li><a href="/basic_concept/repository/" class="sidebar-link">Docker Registry</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>ä½¿ç”¨é•œåƒ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/image/" class="sidebar-link">ä½¿ç”¨ Docker é•œåƒ</a></li><li><a href="/image/pull/" class="sidebar-link">è·å–é•œåƒ</a></li><li><a href="/image/list/" class="sidebar-link">åˆ—å‡ºé•œåƒ</a></li><li><a href="/image/rm/" class="sidebar-link">åˆ é™¤æœ¬åœ°é•œåƒ</a></li><li><a href="/image/commit/" class="sidebar-link">åˆ©ç”¨ commit ç†è§£é•œåƒæ„æˆ</a></li><li><a href="/image/build/" class="sidebar-link">ä½¿ç”¨ Dockerfile å®šåˆ¶é•œåƒ</a></li><li><a href="/image/other/" class="sidebar-link">å…¶å®ƒåˆ¶ä½œé•œåƒçš„æ–¹å¼</a></li><li><a href="/image/internal/" class="sidebar-link">é•œåƒçš„å®ç°åŸç†</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Dockerfile</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/image/dockerfile/" class="sidebar-link">Dockerfile æŒ‡ä»¤è¯¦è§£</a></li><li><a href="/image/dockerfile/copy/" class="sidebar-link">COPY å¤åˆ¶æ–‡ä»¶</a></li><li><a href="/image/dockerfile/add/" class="sidebar-link">ADD æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶</a></li><li><a href="/image/dockerfile/cmd/" class="sidebar-link">CMD å®¹å™¨å¯åŠ¨å‘½ä»¤</a></li><li><a href="/image/dockerfile/entrypoint/" class="sidebar-link">ENTRYPOINT å…¥å£ç‚¹</a></li><li><a href="/image/dockerfile/env/" class="sidebar-link">ENV è®¾ç½®ç¯å¢ƒå˜é‡</a></li><li><a href="/image/dockerfile/arg/" class="sidebar-link">ARG æ„å»ºå‚æ•°</a></li><li><a href="/image/dockerfile/volume/" class="sidebar-link">VOLUME å®šä¹‰åŒ¿åå·</a></li><li><a href="/image/dockerfile/expose/" class="sidebar-link">EXPOSE å£°æ˜ç«¯å£</a></li><li><a href="/image/dockerfile/workdir/" class="sidebar-link">WORKDIR æŒ‡å®šå·¥ä½œç›®å½•</a></li><li><a href="/image/dockerfile/user/" class="sidebar-link">USER æŒ‡å®šå½“å‰ç”¨æˆ·</a></li><li><a href="/image/dockerfile/healthcheck/" class="sidebar-link">HEALTHCHECK å¥åº·æ£€æŸ¥</a></li><li><a href="/image/dockerfile/label/" class="sidebar-link">LABEL æŒ‡ä»¤</a></li><li><a href="/image/dockerfile/shell/" class="sidebar-link">SHELL æŒ‡ä»¤</a></li><li><a href="/image/dockerfile/onbuild/" class="sidebar-link">ONBUILD ä¸ºä»–äººåšå«è¡£è£³</a></li><li><a href="/image/dockerfile/references/" class="sidebar-link">å‚è€ƒæ–‡æ¡£</a></li><li><a href="/image/multistage-builds/" class="sidebar-link">å¤šé˜¶æ®µæ„å»º</a></li><li><a href="/image/multistage-builds/laravel/" class="sidebar-link">å®æˆ˜å¤šé˜¶æ®µæ„å»º Laravel é•œåƒ</a></li><li><a href="/image/manifest/" class="sidebar-link">æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„ Docker é•œåƒ -- docker manifest å‘½ä»¤è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>æ“ä½œå®¹å™¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/container/" class="sidebar-link">æ“ä½œ Docker å®¹å™¨</a></li><li><a href="/container/run/" class="sidebar-link">å¯åŠ¨å®¹å™¨</a></li><li><a href="/container/daemon/" class="sidebar-link">åå°è¿è¡Œ</a></li><li><a href="/container/stop/" class="sidebar-link">ç»ˆæ­¢å®¹å™¨</a></li><li><a href="/container/attach_exec/" class="sidebar-link">è¿›å…¥å®¹å™¨</a></li><li><a href="/container/import_export/" class="sidebar-link">å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨</a></li><li><a href="/container/rm/" class="sidebar-link">åˆ é™¤å®¹å™¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Docker ä»“åº“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/repository/" class="sidebar-link">è®¿é—®ä»“åº“</a></li><li><a href="/repository/dockerhub/" class="sidebar-link">Docker Hub</a></li><li><a href="/repository/registry/" class="sidebar-link">ç§æœ‰ä»“åº“</a></li><li><a href="/repository/registry_auth/" class="sidebar-link">ç§æœ‰ä»“åº“é«˜çº§é…ç½®</a></li><li><a href="/repository/nexus3_registry/" class="sidebar-link">Nexus3.x çš„ç§æœ‰ä»“åº“</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>æ•°æ®ç®¡ç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/data_management/" class="sidebar-link">Docker æ•°æ®ç®¡ç†</a></li><li><a href="/data_management/volume/" class="sidebar-link">æ•°æ®å·</a></li><li><a href="/data_management/bind-mounts/" class="sidebar-link">æŒ‚è½½ä¸»æœºç›®å½•</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>ä½¿ç”¨ç½‘ç»œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/network/" class="sidebar-link">Docker ä¸­çš„ç½‘ç»œåŠŸèƒ½ä»‹ç»</a></li><li><a href="/network/port_mapping/" class="sidebar-link">å¤–éƒ¨è®¿é—®å®¹å™¨</a></li><li><a href="/network/linking/" class="sidebar-link">å®¹å™¨äº’è”</a></li><li><a href="/network/dns/" class="sidebar-link">é…ç½® DNS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>é«˜çº§ç½‘ç»œé…ç½®</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advanced_network/" class="sidebar-link">é«˜çº§ç½‘ç»œé…ç½®</a></li><li><a href="/advanced_network/quick_guide/" class="sidebar-link">å¿«é€Ÿé…ç½®æŒ‡å—</a></li><li><a href="/advanced_network/access_control/" class="sidebar-link">å®¹å™¨è®¿é—®æ§åˆ¶</a></li><li><a href="/advanced_network/port_mapping/" class="sidebar-link">æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºçš„å®ç°</a></li><li><a href="/advanced_network/bridge/" class="sidebar-link">è‡ªå®šä¹‰ç½‘æ¡¥</a></li><li><a href="/advanced_network/example/" class="sidebar-link">å·¥å…·å’Œç¤ºä¾‹</a></li><li><a href="/advanced_network/config_file/" class="sidebar-link">ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶</a></li><li><a href="/advanced_network/ptp/" class="sidebar-link">ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç‚¹åˆ°ç‚¹è¿æ¥</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Swarm mode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/swarm_mode/" class="sidebar-link">Swarm mode</a></li><li><a href="/swarm_mode/overview/" class="sidebar-link">åŸºæœ¬æ¦‚å¿µ</a></li><li><a href="/swarm_mode/create/" class="sidebar-link">åˆ›å»º Swarm é›†ç¾¤</a></li><li><a href="/swarm_mode/deploy/" class="sidebar-link">éƒ¨ç½²æœåŠ¡</a></li><li><a href="/swarm_mode/stack/" class="sidebar-link">åœ¨ Swarm é›†ç¾¤ä¸­ä½¿ç”¨ compose æ–‡ä»¶</a></li><li><a href="/swarm_mode/secret/" class="sidebar-link">åœ¨ Swarm é›†ç¾¤ä¸­ç®¡ç†æ•æ„Ÿæ•°æ®</a></li><li><a href="/swarm_mode/config/" class="sidebar-link">åœ¨ Swarm é›†ç¾¤ä¸­ç®¡ç†é…ç½®æ•°æ®</a></li><li><a href="/swarm_mode/rolling_update/" class="sidebar-link">SWarm mode ä¸æ»šåŠ¨å‡çº§</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>å®‰å…¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/security/" class="sidebar-link">å®‰å…¨</a></li><li><a href="/security/kernel_ns/" class="sidebar-link">å†…æ ¸å‘½åç©ºé—´</a></li><li><a href="/security/control_group/" class="sidebar-link">æ§åˆ¶ç»„</a></li><li><a href="/security/daemon_sec/" class="sidebar-link">DockeræœåŠ¡ç«¯çš„é˜²æŠ¤</a></li><li><a href="/security/kernel_capability/" class="sidebar-link">å†…æ ¸èƒ½åŠ›æœºåˆ¶</a></li><li><a href="/security/other_feature/" class="sidebar-link">å…¶å®ƒå®‰å…¨ç‰¹æ€§</a></li><li><a href="/security/summary/" class="sidebar-link">æ€»ç»“</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>åº•å±‚å®ç°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/underly/" class="sidebar-link">åº•å±‚å®ç°</a></li><li><a href="/underly/arch/" class="sidebar-link">åŸºæœ¬æ¶æ„</a></li><li><a href="/underly/namespace/" class="sidebar-link">å‘½åç©ºé—´</a></li><li><a href="/underly/cgroups/" class="sidebar-link">æ§åˆ¶ç»„</a></li><li><a href="/underly/ufs/" class="sidebar-link">è”åˆæ–‡ä»¶ç³»ç»Ÿ</a></li><li><a href="/underly/container_format/" class="sidebar-link">å®¹å™¨æ ¼å¼</a></li><li><a href="/underly/network/" class="sidebar-link">Docker ç½‘ç»œå®ç°</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Docker Buildx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/buildx/" class="sidebar-link">Docker Buildx</a></li><li><a href="/buildx/buildkit/" class="sidebar-link">ä½¿ç”¨ BuildKit æ„å»ºé•œåƒ</a></li><li><a href="/buildx/buildx/" class="sidebar-link">ä½¿ç”¨ Buildx æ„å»ºé•œåƒ</a></li><li><a href="/buildx/multi-arch-images/" class="sidebar-link">ä½¿ç”¨ buildx æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„ Docker é•œåƒ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Etcd</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/etcd/" class="sidebar-link">etcd</a></li><li><a href="/etcd/intro/" class="sidebar-link">ä»€ä¹ˆæ˜¯ etcd</a></li><li><a href="/etcd/install/" class="sidebar-link">å®‰è£…</a></li><li><a href="/etcd/cluster/" class="sidebar-link">etcd é›†ç¾¤</a></li><li><a href="/etcd/etcdctl/" class="sidebar-link">ä½¿ç”¨ etcdctl</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Fedora CoreOS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coreos/" class="sidebar-link">Fedora CoreOS</a></li><li><a href="/coreos/intro/" class="sidebar-link">Fedora CoreOS ä»‹ç»</a></li><li><a href="/coreos/install/" class="sidebar-link">å®‰è£… Fedora CoreOS</a></li></ul></section></li><li><a href="/podman/" class="sidebar-link">podman</a></li><li><a href="/appendix/faq/" class="sidebar-link">å¸¸è§é—®é¢˜æ€»ç»“</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>çƒ­é—¨é•œåƒä»‹ç»</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/appendix/repo/" class="sidebar-link">çƒ­é—¨é•œåƒä»‹ç»</a></li><li><a href="/appendix/repo/ubuntu/" class="sidebar-link">Ubuntu</a></li><li><a href="/appendix/repo/centos/" class="sidebar-link">CentOS</a></li><li><a href="/appendix/repo/nginx/" class="sidebar-link">Nginx</a></li><li><a href="/appendix/repo/php/" class="sidebar-link">PHP</a></li><li><a href="/appendix/repo/nodejs/" class="sidebar-link">Node.js</a></li><li><a href="/appendix/repo/mysql/" class="sidebar-link">MySQL</a></li><li><a href="/appendix/repo/wordpress/" class="sidebar-link">WordPress</a></li><li><a href="/appendix/repo/mongodb/" class="sidebar-link">MongoDB</a></li><li><a href="/appendix/repo/redis/" class="sidebar-link">Redis</a></li><li><a href="/appendix/repo/minio/" class="sidebar-link">minio</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>Docker å‘½ä»¤</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/appendix/command/" class="sidebar-link">Docker å‘½ä»¤æŸ¥è¯¢</a></li><li><a href="/appendix/command/docker/" class="sidebar-link">å®¢æˆ·ç«¯å‘½ä»¤(docker)</a></li><li><a href="/appendix/command/dockerd/" class="sidebar-link">æœåŠ¡ç«¯å‘½ä»¤(dockerd)</a></li></ul></section></li><li><a href="/appendix/best_practices/" aria-current="page" class="active sidebar-link">Dockerfile æœ€ä½³å®è·µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/appendix/best_practices/#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="sidebar-link">ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/appendix/best_practices/#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="sidebar-link">å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="sidebar-link">ä½¿ç”¨ .dockerignore æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º" class="sidebar-link">ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="sidebar-link">é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="sidebar-link">ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="sidebar-link">é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#å°†å¤šè¡Œå‚æ•°æ’åº" class="sidebar-link">å°†å¤šè¡Œå‚æ•°æ’åº</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#æ„å»ºç¼“å­˜" class="sidebar-link">æ„å»ºç¼“å­˜</a></li></ul></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#dockerfile-æŒ‡ä»¤" class="sidebar-link">Dockerfile æŒ‡ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/appendix/best_practices/#from" class="sidebar-link">FROM</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#label" class="sidebar-link">LABEL</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#run" class="sidebar-link">RUN</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#cmd" class="sidebar-link">CMD</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#expose" class="sidebar-link">EXPOSE</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#env" class="sidebar-link">ENV</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#add-å’Œ-copy" class="sidebar-link">ADD å’Œ COPY</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#entrypoint" class="sidebar-link">ENTRYPOINT</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#volume" class="sidebar-link">VOLUME</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#user" class="sidebar-link">USER</a></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#workdir" class="sidebar-link">WORKDIR</a></li></ul></li><li class="sidebar-sub-header"><a href="/appendix/best_practices/#å®˜æ–¹é•œåƒç¤ºä¾‹" class="sidebar-link">å®˜æ–¹é•œåƒç¤ºä¾‹</a></li></ul></li><li><a href="/appendix/debug/" class="sidebar-link">å¦‚ä½•è°ƒè¯• Docker</a></li><li><a href="/appendix/resources/" class="sidebar-link">èµ„æºé“¾æ¥</a></li></ul> </aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/appendix/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">é™„å½•</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/appendix/best_practices/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">Dockerfile æœ€ä½³å®è·µ</span></a> <meta property="position" content="2"></li></ol></nav>  <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Dockerfile æœ€ä½³å®è·µ</span></h1> <div class="page-info"><!----> <span aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon time-icon"><path d="M511.997 70.568c-243.797 0-441.429 197.633-441.429 441.435 0 243.797 197.632 441.429 441.43 441.429S953.431 755.8 953.431 512.002c0-243.796-197.637-441.434-441.435-441.434zm150.158 609.093l-15.605 15.61c-8.621 8.615-22.596 8.615-31.215 0L472.197 552.126c-4.95-4.944-4.34-14.888-4.34-24.677V247.14c0-12.19 9.882-22.07 22.07-22.07h22.07c12.19 0 22.07 9.882 22.07 22.07v273.218l128.088 128.088c8.62 8.62 8.62 22.595 0 31.215zm0 0" fill="currentColor"></path></svg> <span>å¤§çº¦ 13 åˆ†é’Ÿ</span> <meta property="timeRequired" content="PT13M"></span><span aria-label="å­—æ•°ğŸ” " data-balloon-pos="down" class="words-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon word-icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z" fill="currentColor"></path> <path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z" fill="currentColor"></path></svg> <span>çº¦ 3863 å­—</span> <meta property="wordCount" content="3863"></span></div> <!----> <hr></div> <!----> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor anchor2"><a href="/appendix/best_practices/#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="anchor-link"><div>ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/appendix/best_practices/#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="anchor-link"><div>å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="anchor-link"><div>ä½¿ç”¨ .dockerignore æ–‡ä»¶</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º" class="anchor-link"><div>ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="anchor-link"><div>é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="anchor-link"><div>ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="anchor-link"><div>é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#å°†å¤šè¡Œå‚æ•°æ’åº" class="anchor-link"><div>å°†å¤šè¡Œå‚æ•°æ’åº</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#æ„å»ºç¼“å­˜" class="anchor-link"><div>æ„å»ºç¼“å­˜</div></a></li></ul></li><li class="anchor anchor2"><a href="/appendix/best_practices/#dockerfile-æŒ‡ä»¤" class="anchor-link"><div>Dockerfile æŒ‡ä»¤</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/appendix/best_practices/#from" class="anchor-link"><div>FROM</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#label" class="anchor-link"><div>LABEL</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#run" class="anchor-link"><div>RUN</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#cmd" class="anchor-link"><div>CMD</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#expose" class="anchor-link"><div>EXPOSE</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#env" class="anchor-link"><div>ENV</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#add-å’Œ-copy" class="anchor-link"><div>ADD å’Œ COPY</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#entrypoint" class="anchor-link"><div>ENTRYPOINT</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#volume" class="anchor-link"><div>VOLUME</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#user" class="anchor-link"><div>USER</div></a></li><li class="anchor anchor3"><a href="/appendix/best_practices/#workdir" class="anchor-link"><div>WORKDIR</div></a></li></ul></li><li class="anchor anchor2"><a href="/appendix/best_practices/#å®˜æ–¹é•œåƒç¤ºä¾‹" class="anchor-link"><div>å®˜æ–¹é•œåƒç¤ºä¾‹</div></a></li></ul></div></aside></div> <div class="theme-default-content content__default"><h1 id="dockerfile-æœ€ä½³å®è·µ"><a href="#dockerfile-æœ€ä½³å®è·µ" class="header-anchor">#</a> Dockerfile æœ€ä½³å®è·µ</h1> <div data-v-1a9df5cc><blockquote style="display:;" data-v-1a9df5cc><a href="https://cloud.tencent.com/act/cps/redirect?redirect=10488&amp;cps_key=3a5255852d5db99dcd5da4c72f05df61&amp;from=activity" target="_blank" rel="nofollow" style="text-decoration: none; width: 100%" data-v-1a9df5cc><div class="ads" data-v-1a9df5cc><div data-v-1a9df5cc><span class="name" data-v-1a9df5cc>
              è…¾è®¯äº‘
            </span> <span class="description" data-v-1a9df5cc>
              2021ä¸Šäº‘é‡‡è´­å­£
            </span> <span class="description-strong" data-v-1a9df5cc>
              1 æ ¸ 2G äº‘æœåŠ¡å™¨ï¼Œé¦–å¹´ 95 å…ƒ
            </span> <span class="action" data-v-1a9df5cc>
              å»çœ‹çœ‹
            </span> <span class="ads-text" data-v-1a9df5cc>å¹¿å‘Š</span></div></div></a></blockquote> </div> <p>æœ¬é™„å½•æ˜¯ç¬”è€…å¯¹ Docker å®˜æ–¹æ–‡æ¡£ä¸­ <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">Best practices for writing Dockerfiles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ç†è§£ä¸ç¿»è¯‘ã€‚</p> <h2 id="ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®"><a href="#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="header-anchor">#</a> ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</h2> <h3 id="å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„"><a href="#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="header-anchor">#</a> å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</h3> <p>é€šè¿‡ <code>Dockerfile</code> æ„å»ºçš„é•œåƒæ‰€å¯åŠ¨çš„å®¹å™¨åº”è¯¥å°½å¯èƒ½çŸ­æš‚ï¼ˆç”Ÿå‘½å‘¨æœŸçŸ­ï¼‰ã€‚ã€ŒçŸ­æš‚ã€æ„å‘³ç€å¯ä»¥åœæ­¢å’Œé”€æ¯å®¹å™¨ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨å¹¶éƒ¨ç½²å¥½æ‰€éœ€çš„è®¾ç½®å’Œé…ç½®å·¥ä½œé‡åº”è¯¥æ˜¯æå°çš„ã€‚</p> <h3 id="ä½¿ç”¨-dockerignore-æ–‡ä»¶"><a href="#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="header-anchor">#</a> ä½¿ç”¨ <code>.dockerignore</code> æ–‡ä»¶</h3> <p>ä½¿ç”¨ <code>Dockerfile</code> æ„å»ºé•œåƒæ—¶æœ€å¥½æ˜¯å°† <code>Dockerfile</code> æ”¾ç½®åœ¨ä¸€ä¸ªæ–°å»ºçš„ç©ºç›®å½•ä¸‹ã€‚ç„¶åå°†æ„å»ºé•œåƒæ‰€éœ€è¦çš„æ–‡ä»¶æ·»åŠ åˆ°è¯¥ç›®å½•ä¸­ã€‚ä¸ºäº†æé«˜æ„å»ºé•œåƒçš„æ•ˆç‡ï¼Œä½ å¯ä»¥åœ¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.dockerignore</code> æ–‡ä»¶æ¥æŒ‡å®šè¦å¿½ç•¥çš„æ–‡ä»¶å’Œç›®å½•ã€‚<code>.dockerignore</code> æ–‡ä»¶çš„æ’é™¤æ¨¡å¼è¯­æ³•å’Œ Git çš„ <code>.gitignore</code> æ–‡ä»¶ç›¸ä¼¼ã€‚</p> <h3 id="ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"><a href="#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º" class="header-anchor">#</a> ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</h3> <p>åœ¨ <code>Docker 17.05</code> ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="/image/multistage-builds.html">å¤šé˜¶æ®µæ„å»º</a> æ¥å‡å°‘æ‰€æ„å»ºé•œåƒçš„å¤§å°ã€‚</p> <h3 id="é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…"><a href="#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="header-anchor">#</a> é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</h3> <p>ä¸ºäº†é™ä½å¤æ‚æ€§ã€å‡å°‘ä¾èµ–ã€å‡å°æ–‡ä»¶å¤§å°ã€èŠ‚çº¦æ„å»ºæ—¶é—´ï¼Œä½ åº”è¯¥é¿å…å®‰è£…ä»»ä½•ä¸å¿…è¦çš„åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸è¦åœ¨æ•°æ®åº“é•œåƒä¸­åŒ…å«ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p> <h3 id="ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"><a href="#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="header-anchor">#</a> ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</h3> <p>åº”è¯¥ä¿è¯åœ¨ä¸€ä¸ªå®¹å™¨ä¸­åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚å°†å¤šä¸ªåº”ç”¨è§£è€¦åˆ°ä¸åŒå®¹å™¨ä¸­ï¼Œä¿è¯äº†å®¹å™¨çš„æ¨ªå‘æ‰©å±•å’Œå¤ç”¨ã€‚ä¾‹å¦‚ web åº”ç”¨åº”è¯¥åŒ…å«ä¸‰ä¸ªå®¹å™¨ï¼šwebåº”ç”¨ã€æ•°æ®åº“ã€ç¼“å­˜ã€‚</p> <p>å¦‚æœå®¹å™¨äº’ç›¸ä¾èµ–ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="/network/linking.html">Docker è‡ªå®šä¹‰ç½‘ç»œ</a> æ¥æŠŠè¿™äº›å®¹å™¨è¿æ¥èµ·æ¥ã€‚</p> <h3 id="é•œåƒå±‚æ•°å°½å¯èƒ½å°‘"><a href="#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="header-anchor">#</a> é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</h3> <p>ä½ éœ€è¦åœ¨ <code>Dockerfile</code> å¯è¯»æ€§ï¼ˆä¹ŸåŒ…æ‹¬é•¿æœŸçš„å¯ç»´æŠ¤æ€§ï¼‰å’Œå‡å°‘å±‚æ•°ä¹‹é—´åšä¸€ä¸ªå¹³è¡¡ã€‚</p> <h3 id="å°†å¤šè¡Œå‚æ•°æ’åº"><a href="#å°†å¤šè¡Œå‚æ•°æ’åº" class="header-anchor">#</a> å°†å¤šè¡Œå‚æ•°æ’åº</h3> <p>å°†å¤šè¡Œå‚æ•°æŒ‰å­—æ¯é¡ºåºæ’åºï¼ˆæ¯”å¦‚è¦å®‰è£…å¤šä¸ªåŒ…æ—¶ï¼‰ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ é¿å…é‡å¤åŒ…å«åŒä¸€ä¸ªåŒ…ï¼Œæ›´æ–°åŒ…åˆ—è¡¨æ—¶ä¹Ÿæ›´å®¹æ˜“ã€‚ä¹Ÿä¾¿äº <code>PRs</code> é˜…è¯»å’Œå®¡æŸ¥ã€‚å»ºè®®åœ¨åæ–œæ ç¬¦å· <code>\</code> ä¹‹å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§ã€‚</p> <p>ä¸‹é¢æ˜¯æ¥è‡ª <code>buildpack-deps</code> é•œåƒçš„ä¾‹å­ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
  bzr \
  cvs \
  git \
  mercurial \
  subversion
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="æ„å»ºç¼“å­˜"><a href="#æ„å»ºç¼“å­˜" class="header-anchor">#</a> æ„å»ºç¼“å­˜</h3> <p>åœ¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒDocker ä¼šéå† <code>Dockerfile</code> æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚åœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤ä¹‹å‰ï¼ŒDocker éƒ½ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å¯é‡ç”¨çš„é•œåƒï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ç°å­˜çš„é•œåƒï¼Œä¸å†é‡å¤åˆ›å»ºã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>--no-cache=true</code> é€‰é¡¹ã€‚</p> <p>ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¾—æ˜ç™½ä»€ä¹ˆæ—¶å€™ä¼šï¼Œä»€ä¹ˆæ—¶å€™ä¸ä¼šæ‰¾åˆ°åŒ¹é…çš„é•œåƒï¼Œéµå¾ªçš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹ï¼š</p> <ul><li>ä»ä¸€ä¸ªåŸºç¡€é•œåƒå¼€å§‹ï¼ˆ<code>FROM</code> æŒ‡ä»¤æŒ‡å®šï¼‰ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤å°†å’Œè¯¥åŸºç¡€é•œåƒçš„æ‰€æœ‰å­é•œåƒè¿›è¡ŒåŒ¹é…ï¼Œæ£€æŸ¥è¿™äº›å­é•œåƒè¢«åˆ›å»ºæ—¶ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯å¦å’Œè¢«æ£€æŸ¥çš„æŒ‡ä»¤å®Œå…¨ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li> <li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç®€å•åœ°å¯¹æ¯” <code>Dockerfile</code> ä¸­çš„æŒ‡ä»¤å’Œå­é•œåƒã€‚ç„¶è€Œï¼Œæœ‰äº›æŒ‡ä»¤éœ€è¦æ›´å¤šçš„æ£€æŸ¥å’Œè§£é‡Šã€‚</li> <li>å¯¹äº <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œé•œåƒä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¹Ÿä¼šè¢«æ£€æŸ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒå’Œã€‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ä¸ä¼šçº³å…¥æ ¡éªŒã€‚åœ¨ç¼“å­˜çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è¿™äº›æ ¡éªŒå’Œå’Œå·²å­˜åœ¨é•œåƒä¸­çš„æ–‡ä»¶æ ¡éªŒå’Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•æ”¹å˜ï¼Œæ¯”å¦‚å†…å®¹å’Œå…ƒæ•°æ®ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li> <li>é™¤äº† <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œç¼“å­˜åŒ¹é…è¿‡ç¨‹ä¸ä¼šæŸ¥çœ‹ä¸´æ—¶å®¹å™¨ä¸­çš„æ–‡ä»¶æ¥å†³å®šç¼“å­˜æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå®Œ <code>RUN apt-get -y update</code> æŒ‡ä»¤åï¼Œå®¹å™¨ä¸­ä¸€äº›æ–‡ä»¶è¢«æ›´æ–°ï¼Œä½† Docker ä¸ä¼šæ£€æŸ¥è¿™äº›æ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰æŒ‡ä»¤å­—ç¬¦ä¸²æœ¬èº«è¢«ç”¨æ¥åŒ¹é…ç¼“å­˜ã€‚</li></ul> <p>ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼Œæ‰€æœ‰åç»­çš„ <code>Dockerfile</code> æŒ‡ä»¤éƒ½å°†äº§ç”Ÿæ–°çš„é•œåƒï¼Œç¼“å­˜ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p> <h2 id="dockerfile-æŒ‡ä»¤"><a href="#dockerfile-æŒ‡ä»¤" class="header-anchor">#</a> Dockerfile æŒ‡ä»¤</h2> <p>ä¸‹é¢é’ˆå¯¹ <code>Dockerfile</code> ä¸­å„ç§æŒ‡ä»¤çš„æœ€ä½³ç¼–å†™æ–¹å¼ç»™å‡ºå»ºè®®ã€‚</p> <h3 id="from"><a href="#from" class="header-anchor">#</a> FROM</h3> <p>å°½å¯èƒ½ä½¿ç”¨å½“å‰å®˜æ–¹ä»“åº“ä½œä¸ºä½ æ„å»ºé•œåƒçš„åŸºç¡€ã€‚æ¨èä½¿ç”¨ <a href="https://hub.docker.com/_/alpine/" target="_blank" rel="noopener noreferrer">Alpine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é•œåƒï¼Œå› ä¸ºå®ƒè¢«ä¸¥æ ¼æ§åˆ¶å¹¶ä¿æŒæœ€å°å°ºå¯¸ï¼ˆç›®å‰å°äº 5 MBï¼‰ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆã€‚</p> <h3 id="label"><a href="#label" class="header-anchor">#</a> LABEL</h3> <p>ä½ å¯ä»¥ç»™é•œåƒæ·»åŠ æ ‡ç­¾æ¥å¸®åŠ©ç»„ç»‡é•œåƒã€è®°å½•è®¸å¯ä¿¡æ¯ã€è¾…åŠ©è‡ªåŠ¨åŒ–æ„å»ºç­‰ã€‚æ¯ä¸ªæ ‡ç­¾ä¸€è¡Œï¼Œç”± <code>LABEL</code> å¼€å¤´åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾å¯¹ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å„ç§ä¸åŒçš„å¯èƒ½æ ¼å¼ã€‚<code>#</code> å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šå†…å®¹ã€‚</p> <blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ çš„å­—ç¬¦ä¸²ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¿…é¡»å°†å­—ç¬¦ä¸²æ”¾å…¥å¼•å·ä¸­æˆ–è€…å¯¹ç©ºæ ¼ä½¿ç”¨è½¬ä¹‰ã€‚å¦‚æœå­—ç¬¦ä¸²å†…å®¹æœ¬èº«å°±åŒ…å«å¼•å·ï¼Œå¿…é¡»å¯¹å¼•å·ä½¿ç”¨è½¬ä¹‰ã€‚</p></blockquote> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># Set one or more individual labels</span>
<span class="token keyword">LABEL</span> com.example.version=<span class="token string">&quot;0.0.1-beta&quot;</span>

<span class="token keyword">LABEL</span> vendor=<span class="token string">&quot;ACME Incorporated&quot;</span>

<span class="token keyword">LABEL</span> com.example.release<span class="token punctuation">-</span>date=<span class="token string">&quot;2015-02-12&quot;</span>

<span class="token keyword">LABEL</span> com.example.version.is<span class="token punctuation">-</span>production=<span class="token string">&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸€ä¸ªé•œåƒå¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼Œä½†å»ºè®®å°†å¤šä¸ªæ ‡ç­¾æ”¾å…¥åˆ°ä¸€ä¸ª <code>LABEL</code> æŒ‡ä»¤ä¸­ã€‚</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># Set multiple labels at once, using line-continuation characters to break long lines</span>
<span class="token keyword">LABEL</span> vendor=ACME\ Incorporated \
      com.example.is<span class="token punctuation">-</span>beta= \
      com.example.is<span class="token punctuation">-</span>production=<span class="token string">&quot;&quot;</span> \
      com.example.version=<span class="token string">&quot;0.0.1-beta&quot;</span> \
      com.example.release<span class="token punctuation">-</span>date=<span class="token string">&quot;2015-02-12&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å…³äºæ ‡ç­¾å¯ä»¥æ¥å—çš„é”®å€¼å¯¹ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener noreferrer">Understanding object labels<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚å…³äºæŸ¥è¯¢æ ‡ç­¾ä¿¡æ¯ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener noreferrer">Managing labels on objects<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h3 id="run"><a href="#run" class="header-anchor">#</a> RUN</h3> <p>ä¸ºäº†ä¿æŒ <code>Dockerfile</code> æ–‡ä»¶çš„å¯è¯»æ€§ï¼Œå¯ç†è§£æ€§ï¼Œä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå»ºè®®å°†é•¿çš„æˆ–å¤æ‚çš„ <code>RUN</code> æŒ‡ä»¤ç”¨åæ–œæ  <code>\</code> åˆ†å‰²æˆå¤šè¡Œã€‚</p> <h4 id="apt-get"><a href="#apt-get" class="header-anchor">#</a> apt-get</h4> <p><code>RUN</code> æŒ‡ä»¤æœ€å¸¸è§çš„ç”¨æ³•æ˜¯å®‰è£…åŒ…ç”¨çš„ <code>apt-get</code>ã€‚å› ä¸º <code>RUN apt-get</code> æŒ‡ä»¤ä¼šå®‰è£…åŒ…ï¼Œæ‰€ä»¥æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ã€‚</p> <p>ä¸è¦ä½¿ç”¨ <code>RUN apt-get upgrade</code> æˆ– <code>dist-upgrade</code>ï¼Œå› ä¸ºè®¸å¤šåŸºç¡€é•œåƒä¸­çš„ã€Œå¿…é¡»ã€åŒ…ä¸ä¼šåœ¨ä¸€ä¸ªéç‰¹æƒå®¹å™¨ä¸­å‡çº§ã€‚å¦‚æœåŸºç¡€é•œåƒä¸­çš„æŸä¸ªåŒ…è¿‡æ—¶äº†ï¼Œä½ åº”è¯¥è”ç³»å®ƒçš„ç»´æŠ¤è€…ã€‚å¦‚æœä½ ç¡®å®šæŸä¸ªç‰¹å®šçš„åŒ…ï¼Œæ¯”å¦‚ <code>foo</code>ï¼Œéœ€è¦å‡çº§ï¼Œä½¿ç”¨ <code>apt-get install -y foo</code> å°±è¡Œï¼Œè¯¥æŒ‡ä»¤ä¼šè‡ªåŠ¨å‡çº§ <code>foo</code> åŒ…ã€‚</p> <p>æ°¸è¿œå°† <code>RUN apt-get update</code> å’Œ <code>apt-get install</code> ç»„åˆæˆä¸€æ¡ <code>RUN</code> å£°æ˜ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
        package<span class="token punctuation">-</span>bar \
        package<span class="token punctuation">-</span>baz \
        package<span class="token punctuation">-</span>foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å°† <code>apt-get update</code> æ”¾åœ¨ä¸€æ¡å•ç‹¬çš„ <code>RUN</code> å£°æ˜ä¸­ä¼šå¯¼è‡´ç¼“å­˜é—®é¢˜ä»¥åŠåç»­çš„ <code>apt-get install</code> å¤±è´¥ã€‚æ¯”å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª <code>Dockerfile</code> æ–‡ä»¶ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">FROM</span> ubuntu<span class="token punctuation">:</span>18.04

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y curl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ„å»ºé•œåƒåï¼Œæ‰€æœ‰çš„å±‚éƒ½åœ¨ Docker çš„ç¼“å­˜ä¸­ã€‚å‡è®¾ä½ åæ¥åˆä¿®æ”¹äº†å…¶ä¸­çš„ <code>apt-get install</code> æ·»åŠ äº†ä¸€ä¸ªåŒ…ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">FROM</span> ubuntu<span class="token punctuation">:</span>18.04

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y curl nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Docker å‘ç°ä¿®æ”¹åçš„ <code>RUN apt-get update</code> æŒ‡ä»¤å’Œä¹‹å‰çš„å®Œå…¨ä¸€æ ·ã€‚æ‰€ä»¥ï¼Œ<code>apt-get update</code> ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ä½¿ç”¨ä¹‹å‰çš„ç¼“å­˜é•œåƒã€‚å› ä¸º <code>apt-get update</code> æ²¡æœ‰è¿è¡Œï¼Œåé¢çš„ <code>apt-get install</code> å¯èƒ½å®‰è£…çš„æ˜¯è¿‡æ—¶çš„ <code>curl</code> å’Œ <code>nginx</code> ç‰ˆæœ¬ã€‚</p> <p>ä½¿ç”¨ <code>RUN apt-get update &amp;&amp; apt-get install -y</code> å¯ä»¥ç¡®ä¿ä½ çš„ Dockerfiles æ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯åŒ…çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦è¿›ä¸€æ­¥çš„ç¼–ç æˆ–é¢å¤–å¹²é¢„ã€‚è¿™é¡¹æŠ€æœ¯å«ä½œ <code>cache busting</code>ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾ç¤ºæŒ‡å®šä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å·æ¥è¾¾åˆ° <code>cache-busting</code>ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å›ºå®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
    package<span class="token punctuation">-</span>bar \
    package<span class="token punctuation">-</span>baz \
    package<span class="token punctuation">-</span>foo=1.3.*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å›ºå®šç‰ˆæœ¬ä¼šè¿«ä½¿æ„å»ºè¿‡ç¨‹æ£€ç´¢ç‰¹å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸ç®¡ç¼“å­˜ä¸­æœ‰ä»€ä¹ˆã€‚è¿™é¡¹æŠ€æœ¯ä¹Ÿå¯ä»¥å‡å°‘å› æ‰€éœ€åŒ…ä¸­æœªé¢„æ–™åˆ°çš„å˜åŒ–è€Œå¯¼è‡´çš„å¤±è´¥ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>RUN</code> æŒ‡ä»¤çš„ç¤ºä¾‹æ¨¡æ¿ï¼Œå±•ç¤ºäº†æ‰€æœ‰å…³äº <code>apt-get</code> çš„å»ºè®®ã€‚</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
    aufs<span class="token punctuation">-</span>tools \
    automake \
    build<span class="token punctuation">-</span>essential \
    curl \
    dpkg<span class="token punctuation">-</span>sig \
    libcap<span class="token punctuation">-</span>dev \
    libsqlite3<span class="token punctuation">-</span>dev \
    mercurial \
    reprepro \
    ruby1.9.1 \
    ruby1.9.1<span class="token punctuation">-</span>dev \
    s3cmd=1.1.* \
 &amp;&amp; rm <span class="token punctuation">-</span>rf /var/lib/apt/lists/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å…¶ä¸­ <code>s3cmd</code> æŒ‡ä»¤æŒ‡å®šäº†ä¸€ä¸ªç‰ˆæœ¬å· <code>1.1.*</code>ã€‚å¦‚æœä¹‹å‰çš„é•œåƒä½¿ç”¨çš„æ˜¯æ›´æ—§çš„ç‰ˆæœ¬ï¼ŒæŒ‡å®šæ–°çš„ç‰ˆæœ¬ä¼šå¯¼è‡´ <code>apt-get udpate</code> ç¼“å­˜å¤±æ•ˆå¹¶ç¡®ä¿å®‰è£…çš„æ˜¯æ–°ç‰ˆæœ¬ã€‚</p> <p>å¦å¤–ï¼Œæ¸…ç†æ‰ apt ç¼“å­˜ <code>var/lib/apt/lists</code> å¯ä»¥å‡å°é•œåƒå¤§å°ã€‚å› ä¸º <code>RUN</code> æŒ‡ä»¤çš„å¼€å¤´ä¸º <code>apt-get udpate</code>ï¼ŒåŒ…ç¼“å­˜æ€»æ˜¯ä¼šåœ¨ <code>apt-get install</code> ä¹‹å‰åˆ·æ–°ã€‚</p> <blockquote><p>æ³¨æ„ï¼šå®˜æ–¹çš„ Debian å’Œ Ubuntu é•œåƒä¼šè‡ªåŠ¨è¿è¡Œ apt-get cleanï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨ apt-get cleanã€‚</p></blockquote> <h3 id="cmd"><a href="#cmd" class="header-anchor">#</a> CMD</h3> <p><code>CMD</code> æŒ‡ä»¤ç”¨äºæ‰§è¡Œç›®æ ‡é•œåƒä¸­åŒ…å«çš„è½¯ä»¶ï¼Œå¯ä»¥åŒ…å«å‚æ•°ã€‚<code>CMD</code> å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åº”è¯¥ä»¥ <code>CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;...]</code> çš„å½¢å¼ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœåˆ›å»ºé•œåƒçš„ç›®çš„æ˜¯ä¸ºäº†éƒ¨ç½²æŸä¸ªæœåŠ¡(æ¯”å¦‚ <code>Apache</code>)ï¼Œä½ å¯èƒ½ä¼šæ‰§è¡Œç±»ä¼¼äº <code>CMD [&quot;apache2&quot;, &quot;-DFOREGROUND&quot;]</code> å½¢å¼çš„å‘½ä»¤ã€‚æˆ‘ä»¬å»ºè®®ä»»ä½•æœåŠ¡é•œåƒéƒ½ä½¿ç”¨è¿™ç§å½¢å¼çš„å‘½ä»¤ã€‚</p> <p>å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>CMD</code> éƒ½éœ€è¦ä¸€ä¸ªäº¤äº’å¼çš„ <code>shell</code> (bash, Python, perl ç­‰)ï¼Œä¾‹å¦‚ <code>CMD [&quot;perl&quot;, &quot;-de0&quot;]</code>ï¼Œæˆ–è€… <code>CMD [&quot;PHP&quot;, &quot;-a&quot;]</code>ã€‚ä½¿ç”¨è¿™ç§å½¢å¼æ„å‘³ç€ï¼Œå½“ä½ æ‰§è¡Œç±»ä¼¼ <code>docker run -it python</code> æ—¶ï¼Œä½ ä¼šè¿›å…¥ä¸€ä¸ªå‡†å¤‡å¥½çš„ <code>shell</code> ä¸­ã€‚<code>CMD</code> åº”è¯¥åœ¨æå°‘çš„æƒ…å†µä¸‹æ‰èƒ½ä»¥ <code>CMD [&quot;param&quot;, &quot;param&quot;]</code> çš„å½¢å¼ä¸ <code>ENTRYPOINT</code> ååŒä½¿ç”¨ï¼Œé™¤éä½ å’Œä½ çš„é•œåƒä½¿ç”¨è€…éƒ½å¯¹ <code>ENTRYPOINT</code> çš„å·¥ä½œæ–¹å¼ååˆ†ç†Ÿæ‚‰ã€‚</p> <h3 id="expose"><a href="#expose" class="header-anchor">#</a> EXPOSE</h3> <p><code>EXPOSE</code> æŒ‡ä»¤ç”¨äºæŒ‡å®šå®¹å™¨å°†è¦ç›‘å¬çš„ç«¯å£ã€‚å› æ­¤ï¼Œä½ åº”è¯¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨å¸¸è§çš„ç«¯å£ã€‚ä¾‹å¦‚ï¼Œæä¾› <code>Apache</code> web æœåŠ¡çš„é•œåƒåº”è¯¥ä½¿ç”¨ <code>EXPOSE 80</code>ï¼Œè€Œæä¾› <code>MongoDB</code> æœåŠ¡çš„é•œåƒä½¿ç”¨ <code>EXPOSE 27017</code>ã€‚</p> <p>å¯¹äºå¤–éƒ¨è®¿é—®ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ‰§è¡Œ <code>docker run</code> æ—¶ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—æ¥æŒ‡ç¤ºå¦‚ä½•å°†æŒ‡å®šçš„ç«¯å£æ˜ å°„åˆ°æ‰€é€‰æ‹©çš„ç«¯å£ã€‚</p> <h3 id="env"><a href="#env" class="header-anchor">#</a> ENV</h3> <p>ä¸ºäº†æ–¹ä¾¿æ–°ç¨‹åºè¿è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>ENV</code> æ¥ä¸ºå®¹å™¨ä¸­å®‰è£…çš„ç¨‹åºæ›´æ–° <code>PATH</code> ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ä½¿ç”¨ <code>ENV PATH /usr/local/nginx/bin:$PATH</code> æ¥ç¡®ä¿ <code>CMD [&quot;nginx&quot;]</code> èƒ½æ­£ç¡®è¿è¡Œã€‚</p> <p><code>ENV</code> æŒ‡ä»¤ä¹Ÿå¯ç”¨äºä¸ºä½ æƒ³è¦å®¹å™¨åŒ–çš„æœåŠ¡æä¾›å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ Postgres éœ€è¦çš„ <code>PGDATA</code>ã€‚</p> <p>æœ€åï¼Œ<code>ENV</code> ä¹Ÿèƒ½ç”¨äºè®¾ç½®å¸¸è§çš„ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ENV</span> PG_MAJOR 9.3

<span class="token keyword">ENV</span> PG_VERSION 9.3.4

<span class="token keyword">RUN</span> curl <span class="token punctuation">-</span>SL http<span class="token punctuation">:</span>//example.com/postgres<span class="token punctuation">-</span>$PG_VERSION.tar.xz <span class="token punctuation">|</span> tar <span class="token punctuation">-</span>xJC /usr/src/postgress &amp;&amp; â€¦

<span class="token keyword">ENV</span> PATH /usr/local/postgres<span class="token punctuation">-</span>$PG_MAJOR/bin<span class="token punctuation">:</span>$PATH
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç±»ä¼¼äºç¨‹åºä¸­çš„å¸¸é‡ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥è®©ä½ åªéœ€æ”¹å˜ <code>ENV</code> æŒ‡ä»¤æ¥è‡ªåŠ¨çš„æ”¹å˜å®¹å™¨ä¸­çš„è½¯ä»¶ç‰ˆæœ¬ã€‚</p> <h3 id="add-å’Œ-copy"><a href="#add-å’Œ-copy" class="header-anchor">#</a> ADD å’Œ COPY</h3> <p>è™½ç„¶ <code>ADD</code> å’Œ <code>COPY</code> åŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¸€èˆ¬ä¼˜å…ˆä½¿ç”¨ <code>COPY</code>ã€‚å› ä¸ºå®ƒæ¯” <code>ADD</code> æ›´é€æ˜ã€‚<code>COPY</code> åªæ”¯æŒç®€å•å°†æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­ï¼Œè€Œ <code>ADD</code> æœ‰ä¸€äº›å¹¶ä¸æ˜æ˜¾çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚æœ¬åœ° tar æå–å’Œè¿œç¨‹ URL æ”¯æŒï¼‰ã€‚å› æ­¤ï¼Œ<code>ADD</code> çš„æœ€ä½³ç”¨ä¾‹æ˜¯å°†æœ¬åœ° tar æ–‡ä»¶è‡ªåŠ¨æå–åˆ°é•œåƒä¸­ï¼Œä¾‹å¦‚ <code>ADD rootfs.tar.xz</code>ã€‚</p> <p>å¦‚æœä½ çš„ <code>Dockerfile</code> æœ‰å¤šä¸ªæ­¥éª¤éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸åŒçš„æ–‡ä»¶ã€‚å•ç‹¬ <code>COPY</code> æ¯ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„ <code>COPY</code> æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™å°†ä¿è¯æ¯ä¸ªæ­¥éª¤çš„æ„å»ºç¼“å­˜åªåœ¨ç‰¹å®šçš„æ–‡ä»¶å˜åŒ–æ—¶å¤±æ•ˆã€‚ä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">COPY</span> requirements.txt /tmp/

<span class="token keyword">RUN</span> pip install <span class="token punctuation">-</span><span class="token punctuation">-</span>requirement /tmp/requirements.txt

<span class="token keyword">COPY</span> . /tmp/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æœå°† <code>COPY . /tmp/</code> æ”¾ç½®åœ¨ <code>RUN</code> æŒ‡ä»¤ä¹‹å‰ï¼Œåªè¦ <code>.</code> ç›®å½•ä¸­ä»»ä½•ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œéƒ½ä¼šå¯¼è‡´åç»­æŒ‡ä»¤çš„ç¼“å­˜å¤±æ•ˆã€‚</p> <p>ä¸ºäº†è®©é•œåƒå°½é‡å°ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ <code>ADD</code> æŒ‡ä»¤ä»è¿œç¨‹ URL è·å–åŒ…ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>curl</code> å’Œ <code>wget</code>ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨æ–‡ä»¶æå–å®Œä¹‹ååˆ æ‰ä¸å†éœ€è¦çš„æ–‡ä»¶æ¥é¿å…åœ¨é•œåƒä¸­é¢å¤–æ·»åŠ ä¸€å±‚ã€‚æ¯”å¦‚å°½é‡é¿å…ä¸‹é¢çš„ç”¨æ³•ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ADD</span> http<span class="token punctuation">:</span>//example.com/big.tar.xz /usr/src/things/

<span class="token keyword">RUN</span> tar <span class="token punctuation">-</span>xJf /usr/src/things/big.tar.xz <span class="token punctuation">-</span>C /usr/src/things

<span class="token keyword">RUN</span> make <span class="token punctuation">-</span>C /usr/src/things all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è€Œæ˜¯åº”è¯¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹æ³•ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> mkdir <span class="token punctuation">-</span>p /usr/src/things \
    &amp;&amp; curl <span class="token punctuation">-</span>SL http<span class="token punctuation">:</span>//example.com/big.tar.xz \
    <span class="token punctuation">|</span> tar <span class="token punctuation">-</span>xJC /usr/src/things \
    &amp;&amp; make <span class="token punctuation">-</span>C /usr/src/things all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢ä½¿ç”¨çš„ç®¡é“æ“ä½œï¼Œæ‰€ä»¥æ²¡æœ‰ä¸­é—´æ–‡ä»¶éœ€è¦åˆ é™¤ã€‚</p> <p>å¯¹äºå…¶ä»–ä¸éœ€è¦ <code>ADD</code> çš„è‡ªåŠ¨æå–åŠŸèƒ½çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>COPY</code>ã€‚</p> <h3 id="entrypoint"><a href="#entrypoint" class="header-anchor">#</a> ENTRYPOINT</h3> <p><code>ENTRYPOINT</code> çš„æœ€ä½³ç”¨å¤„æ˜¯è®¾ç½®é•œåƒçš„ä¸»å‘½ä»¤ï¼Œå…è®¸å°†é•œåƒå½“æˆå‘½ä»¤æœ¬èº«æ¥è¿è¡Œï¼ˆç”¨ <code>CMD</code> æä¾›é»˜è®¤é€‰é¡¹ï¼‰ã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹é•œåƒæä¾›äº†å‘½ä»¤è¡Œå·¥å…· <code>s3cmd</code>:</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;s3cmd&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">CMD</span> <span class="token punctuation">[</span><span class="token string">&quot;--help&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç°åœ¨ç›´æ¥è¿è¡Œè¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨ä¼šæ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ docker run s3cmd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æˆ–è€…æä¾›æ­£ç¡®çš„å‚æ•°æ¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ docker run s3cmd <span class="token function">ls</span> s3://mybucket
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ ·é•œåƒåå¯ä»¥å½“æˆå‘½ä»¤è¡Œçš„å‚è€ƒã€‚</p> <p><code>ENTRYPOINT</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥ç»“åˆä¸€ä¸ªè¾…åŠ©è„šæœ¬ä½¿ç”¨ï¼Œå’Œå‰é¢å‘½ä»¤è¡Œé£æ ¼ç±»ä¼¼ï¼Œå³ä½¿å¯åŠ¨å·¥å…·éœ€è¦ä¸æ­¢ä¸€ä¸ªæ­¥éª¤ã€‚</p> <p>ä¾‹å¦‚ï¼Œ<code>Postgres</code> å®˜æ–¹é•œåƒä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ä½œä¸º <code>ENTRYPOINT</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">set</span> -e

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">=</span> <span class="token string">'postgres'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">chown</span> -R postgres <span class="token string">&quot;<span class="token variable">$PGDATA</span>&quot;</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> -A <span class="token string">&quot;<span class="token variable">$PGDATA</span>&quot;</span><span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        gosu postgres initdb
    <span class="token keyword">fi</span>

    <span class="token builtin class-name">exec</span> gosu postgres <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">exec</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>æ³¨æ„ï¼šè¯¥è„šæœ¬ä½¿ç”¨äº† Bash çš„å†…ç½®å‘½ä»¤ execï¼Œæ‰€ä»¥æœ€åè¿è¡Œçš„è¿›ç¨‹å°±æ˜¯å®¹å™¨çš„ PID ä¸º 1 çš„è¿›ç¨‹ã€‚è¿™æ ·ï¼Œè¿›ç¨‹å°±å¯ä»¥æ¥æ”¶åˆ°ä»»ä½•å‘é€ç»™å®¹å™¨çš„ Unix ä¿¡å·äº†ã€‚</p></blockquote> <p>è¯¥è¾…åŠ©è„šæœ¬è¢«æ‹·è´åˆ°å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨å¯åŠ¨æ—¶é€šè¿‡ <code>ENTRYPOINT</code> æ‰§è¡Œï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">COPY</span> ./docker<span class="token punctuation">-</span>entrypoint.sh /

<span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;/docker-entrypoint.sh&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¯¥è„šæœ¬å¯ä»¥è®©ç”¨æˆ·ç”¨å‡ ç§ä¸åŒçš„æ–¹å¼å’Œ <code>Postgres</code> äº¤äº’ã€‚</p> <p>ä½ å¯ä»¥å¾ˆç®€å•åœ°å¯åŠ¨ <code>Postgres</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ docker run postgres
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>Postgres</code> å¹¶ä¼ é€’å‚æ•°ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ docker run postgres postgres --help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æœ€åï¼Œä½ è¿˜å¯ä»¥å¯åŠ¨å¦å¤–ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å·¥å…·ï¼Œæ¯”å¦‚ <code>Bash</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ docker run --rm -it postgres <span class="token function">bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="volume"><a href="#volume" class="header-anchor">#</a> VOLUME</h3> <p><code>VOLUME</code> æŒ‡ä»¤ç”¨äºæš´éœ²ä»»ä½•æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œæˆ–å®¹å™¨åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>VOLUME</code> æ¥ç®¡ç†é•œåƒä¸­çš„å¯å˜éƒ¨åˆ†å’Œç”¨æˆ·å¯ä»¥æ”¹å˜çš„éƒ¨åˆ†ã€‚</p> <h3 id="user"><a href="#user" class="header-anchor">#</a> USER</h3> <p>å¦‚æœæŸä¸ªæœåŠ¡ä¸éœ€è¦ç‰¹æƒæ‰§è¡Œï¼Œå»ºè®®ä½¿ç”¨ <code>USER</code> æŒ‡ä»¤åˆ‡æ¢åˆ°é root ç”¨æˆ·ã€‚å…ˆåœ¨ <code>Dockerfile</code> ä¸­ä½¿ç”¨ç±»ä¼¼ <code>RUN groupadd -r postgres &amp;&amp; useradd -r -g postgres postgres</code> çš„æŒ‡ä»¤åˆ›å»ºç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</p> <blockquote><p>æ³¨æ„ï¼šåœ¨é•œåƒä¸­ï¼Œç”¨æˆ·å’Œç”¨æˆ·ç»„æ¯æ¬¡è¢«åˆ†é…çš„ UID/GID éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œä¸‹æ¬¡é‡æ–°æ„å»ºé•œåƒæ—¶è¢«åˆ†é…åˆ°çš„ UID/GID å¯èƒ½ä¼šä¸ä¸€æ ·ã€‚å¦‚æœè¦ä¾èµ–ç¡®å®šçš„ UID/GIDï¼Œä½ åº”è¯¥æ˜¾ç¤ºçš„æŒ‡å®šä¸€ä¸ª UID/GIDã€‚</p></blockquote> <p>ä½ åº”è¯¥é¿å…ä½¿ç”¨ <code>sudo</code>ï¼Œå› ä¸ºå®ƒä¸å¯é¢„æœŸçš„ TTY å’Œä¿¡å·è½¬å‘è¡Œä¸ºå¯èƒ½é€ æˆçš„é—®é¢˜æ¯”å®ƒèƒ½è§£å†³çš„é—®é¢˜è¿˜å¤šã€‚å¦‚æœä½ çœŸçš„éœ€è¦å’Œ <code>sudo</code> ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œä»¥ root æƒé™åˆå§‹åŒ–æŸä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä»¥é root æƒé™æ‰§è¡Œå®ƒï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/tianon/gosu" target="_blank" rel="noopener noreferrer">gosu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>æœ€åï¼Œä¸ºäº†å‡å°‘å±‚æ•°å’Œå¤æ‚åº¦ï¼Œé¿å…é¢‘ç¹åœ°ä½¿ç”¨ <code>USER</code> æ¥å›åˆ‡æ¢ç”¨æˆ·ã€‚</p> <h3 id="workdir"><a href="#workdir" class="header-anchor">#</a> WORKDIR</h3> <p>ä¸ºäº†æ¸…æ™°æ€§å’Œå¯é æ€§ï¼Œä½ åº”è¯¥æ€»æ˜¯åœ¨ <code>WORKDIR</code> ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚å¦å¤–ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>WORKDIR</code> æ¥æ›¿ä»£ç±»ä¼¼äº <code>RUN cd ... &amp;&amp; do-something</code> çš„æŒ‡ä»¤ï¼Œåè€…éš¾ä»¥é˜…è¯»ã€æ’é”™å’Œç»´æŠ¤ã€‚</p> <h2 id="å®˜æ–¹é•œåƒç¤ºä¾‹"><a href="#å®˜æ–¹é•œåƒç¤ºä¾‹" class="header-anchor">#</a> å®˜æ–¹é•œåƒç¤ºä¾‹</h2> <p>è¿™äº›å®˜æ–¹é•œåƒçš„ Dockerfile éƒ½æ˜¯å‚è€ƒå…¸èŒƒï¼šhttps://github.com/docker-library/docs</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/yeasy/docker_practice/edit/master//appendix/best_practices.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡ç¼–è¾‘äº:</span> <span class="time">2021å¹´3æœˆ7æ—¥ 15:54</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/appendix/command/dockerd/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 01-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 019.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        æœåŠ¡ç«¯å‘½ä»¤(dockerd)
      </a></span> <span class="next"><a href="/appendix/debug/">
        å¦‚ä½•è°ƒè¯• Docker
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 01-18.616.092 15.368 15.368 0 01-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 015.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 015.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> </main> <footer class="footer-wrapper"><!----> <div class="footer">Made with <a target='_blank' href='https://github.com/mister-hope/vuepress-theme-hope'>vuepress-theme-hope</a></div> <!----></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">è¯¥åº”ç”¨å¯ä»¥å®‰è£…åœ¨æ‚¨çš„ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸Šã€‚è¿™å°†ä½¿è¯¥ Web åº”ç”¨ç¨‹åºå¤–è§‚å’Œè¡Œä¸ºä¸å…¶ä»–åº”ç”¨ç¨‹åºç›¸åŒã€‚å®ƒå°†åœ¨å‡ºç°åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­ï¼Œå¹¶å¯ä»¥å›ºå®šåˆ°ä¸»å±å¹•ï¼Œå¼€å§‹èœå•æˆ–ä»»åŠ¡æ ã€‚æ­¤ Web åº”ç”¨ç¨‹åºè¿˜å°†èƒ½å¤Ÿä¸å…¶ä»–åº”ç”¨ç¨‹åºå’Œæ‚¨çš„æ“ä½œç³»ç»Ÿå®‰å…¨åœ°è¿›è¡Œäº¤äº’ã€‚</p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>è¯¦æƒ…</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        å®‰è£… <span></span></button> <button class="cancel-button">
        å–æ¶ˆ
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.92c4a4d7.js" defer></script><script src="/assets/js/vendors~layout-Layout.16be0bbb.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.f10967b0.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.49b65001.js" defer></script><script src="/assets/js/page-Dockerfileæœ€ä½³å®è·µ.b7440de4.js" defer></script><script src="/assets/js/184.19d3cc16.js" defer></script>
  </body>
</html>
